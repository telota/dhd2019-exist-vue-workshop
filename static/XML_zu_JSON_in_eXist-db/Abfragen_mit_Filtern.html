<!DOCTYPE html>
<html class="no-js" lang="de">
<head>
    <title>Abfragen mit Filtern - eXist-db und VueJS für dynamische UI-Komponenten</title>
    <meta name="description" content="Tutorial: eXist-db und VueJS für dynamische UI-Komponenten">
    <meta name="author" content="Oliver Pohl, Jonas Müller-Laackmann, Teodora Dogaru, Lou Klappenbach">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" href="../themes/daux/img/favicon-red.png" type="image/x-icon">

    <!-- Mobile -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Font -->
    
    <!-- CSS -->
    <link href='../themes/daux/css/theme-red.min.css' rel='stylesheet' type='text/css'>
            <!-- Tipue Search -->
        <link href="../tipuesearch/tipuesearch.css" rel="stylesheet">
    
    <!--[if lt IE 9]>
    <script src="../themes/daux/js/html5shiv-3.7.3.min.js"></script>
    <![endif]-->
</head>
<body class=" ">
    <div class="Columns content">
    <aside class="Columns__left Collapsible">
        <button type="button" class="Button Collapsible__trigger">
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
            <span class="Collapsible__trigger__bar"></span>
        </button>

        <a class="Brand" href="../index.html">eXist-db und VueJS für dynamische UI-Komponenten</a>

    <div class="Search">
        <svg class="Search__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 451 451">
            <path d="M447.05 428l-109.6-109.6c29.4-33.8 47.2-77.9 47.2-126.1C384.65 86.2 298.35 0 192.35 0 86.25 0 .05 86.3.05 192.3s86.3 192.3 192.3 192.3c48.2 0 92.3-17.8 126.1-47.2L428.05 447c2.6 2.6 6.1 4 9.5 4s6.9-1.3 9.5-4c5.2-5.2 5.2-13.8 0-19zM26.95 192.3c0-91.2 74.2-165.3 165.3-165.3 91.2 0 165.3 74.2 165.3 165.3s-74.1 165.4-165.3 165.4c-91.1 0-165.3-74.2-165.3-165.4z"/>
        </svg>
        <input type="search" id="tipue_search_input" class="Search__field" placeholder="Suchen..." autocomplete="on"
               results=25 autosave=text_search>
    </div>

        <div class="Collapsible__content">
            <!-- Navigation -->
            <ul class='Nav'><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Vorab</a><ul class='Nav'><li class='Nav__item '><a href="../Vorab/Bevor_es_losgeht.html">Bevor es losgeht</a></li><li class='Nav__item '><a href="../Vorab/quoteSalute.html">quoteSalute</a></li><li class='Nav__item '><a href="../Vorab/Der_quoteSalute_XML_Korpus.html">Der quoteSalute XML Korpus</a></li><li class='Nav__item '><a href="../Vorab/Softwarearchitektur.html">Softwarearchitektur</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>eXist-db Setup</a><ul class='Nav'><li class='Nav__item '><a href="../eXist-db_Setup/eXist-db_Installation.html">eXist-db Installation</a></li><li class='Nav__item '><a href="../eXist-db_Setup/quoteSalute_Installation.html">quoteSalute Installation</a></li></ul></li><li class='Nav__item Nav__item--open has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>XML zu JSON in eXist-db</a><ul class='Nav'><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Übersicht.html">Übersicht</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Erste_Schritte_mit_eXide.html">Erste Schritte mit eXide</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Den_quoteSalute_Korpus_abfragen.html">Den quoteSalute Korpus abfragen</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Challenge_1_-_Eine_Grußformel_abrufen.html">Challenge 1 - Eine Grußformel abrufen</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Challenge_1_-_Lösung.html">Challenge 1 - Lösung</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Eine_zufällige_Grußformel_generieren.html">Eine zufällige Grußformel generieren</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/XML_zu_JSON.html">XML zu JSON</a></li><li class='Nav__item Nav__item--active'><a href="../XML_zu_JSON_in_eXist-db/Abfragen_mit_Filtern.html">Abfragen mit Filtern</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Challenge_2_-_Ein_neuer_Filter.html">Challenge 2 - Ein neuer Filter</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Challenge_2_-_Lösung.html">Challenge 2 - Lösung</a></li><li class='Nav__item '><a href="../XML_zu_JSON_in_eXist-db/Zusammenfassung.html">Zusammenfassung</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>Erste Schritte mit VueJS</a><ul class='Nav'><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Übersicht.html">Übersicht</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Vorbereitung_für_VueJS.html">Vorbereitung für VueJS</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/VueJS_benutzen.html">VueJS benutzen</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Data_und_Templates.html">Data und Templates</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Challenge_1_-_Anzeige_mit_Bedingungen.html">Challenge 1 - Anzeige mit Bedingungen</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Challenge_1_-_Lösung.html">Challenge 1 - Lösung</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Vue_Models_-_Daten_eingeben.html">Vue Models - Daten eingeben</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Vue_Methods_-_Funktionen_auf_Abruf.html">Vue Methods - Funktionen auf Abruf</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Challenge_2_-_Liste_erweitern.html">Challenge 2 - Liste erweitern</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Challenge_2_-_Lösung.html">Challenge 2 - Lösung</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Computed_Properties_-_Immer_auf_dem_aktuellsten_Stand.html">Computed Properties - Immer auf dem aktuellsten Stand</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Challenge_3_-_Mehr_Infos_mit_Computed_Properties.html">Challenge 3 - Mehr Infos mit Computed Properties</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Challenge_3_-_Lösung.html">Challenge 3 - Lösung</a></li><li class='Nav__item '><a href="../Erste_Schritte_mit_VueJS/Zusammenfassung.html">Zusammenfassung</a></li></ul></li><li class='Nav__item  has-children'><a href="#" class="aj-nav folder"><i class="Nav__arrow">&nbsp;</i>eXist-db und VueJS</a><ul class='Nav'><li class='Nav__item '><a href="../eXist-db_und_VueJS/Übersicht.html">Übersicht</a></li></ul></li></ul>

            <div class="Links">
                            </div>

                                <div class="CodeToggler">
                        <hr/>
                                                    <label class="Checkbox">Code-Blöcke anzeigen                                <input type="checkbox" class="CodeToggler__button--main" checked="checked"/>
                                <div class="Checkbox__indicator"></div>
                            </label>
                                            </div>
                
                
                        </div>
    </aside>
    <div class="Columns__right Columns__right--full">
        <div class="Columns__right__content">
            <div class="doc_content">
                <article class="Page">

    <div class="Page__header">
        <h1><a href="../XML_zu_JSON_in_eXist-db/Übersicht.html">XML zu JSON in eXist-db</a> <svg class="Page__header--separator" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 477.175 477.175"><path d="M360.73 229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1 0s-5.3 13.8 0 19.1l215.5 215.5-215.5 215.5c-5.3 5.3-5.3 13.8 0 19.1 2.6 2.6 6.1 4 9.5 4 3.4 0 6.9-1.3 9.5-4l225.1-225.1c5.3-5.2 5.3-13.8.1-19z"/></svg> <a href="../XML_zu_JSON_in_eXist-db/Abfragen_mit_Filtern.html">Abfragen mit Filtern</a></h1>
                    </div>

    <div class="s-content">
        <ul class="TableOfContents">
<li>
<p><a href="#page_Abfragen-mit-Filtern">Abfragen mit Filtern</a></p>
<ul class="TableOfContents">
<li>
<p><a href="#page_Neuerungen-im-Code">Neuerungen im Code</a></p>
</li>
<li>
<p><a href="#page_URL-Parameter">URL-Parameter</a></p>
<ul class="TableOfContents">
<li>
<p><a href="#page_Einzelner-Filter-Briefe-von-Frauen">Einzelner Filter - Briefe von Frauen</a></p>
</li>
<li>
<p><a href="#page_Mehrere-Filter-Briefe-von-Frauen-an-Frauen-oder-neutral">Mehrere Filter - Briefe von Frauen an Frauen (oder neutral)</a></p>
</li>
</ul>
</li>
<li>
<p><a href="#page_Erlaeuterungen">Erläuterungen</a></p>
</li>
<li>
<p><a href="#page_Code">Code</a></p>
</li>
</ul>
</li>
</ul>
<h1 id="page_Abfragen-mit-Filtern">Abfragen mit Filtern</h1>
<p>In diesem Abschnitt wird die Erklärung zur Datei <code>abfrage.xql</code> erweitert. Es wird gezeigt, wie Daten aus dem quoteSalute nach bestimmten Eigenschaften gefiltert werden können, sodass z.B. nur Grußformeln von Frauen als Absender ausgewählt werden.</p>
<h2 id="page_Neuerungen-im-Code">Neuerungen im Code</h2>
<ol>
<li>Öffnen Sie die Datei <code>abfrage-tutorial-04.xql</code> in eXide.</li>
<li>Schauen Sie sich Code und Kommentare an.</li>
<li>Führen Sie den Code aus. Lassen Sie sich das Ergebnis in eXide oder im Browser anzeigen. Was hat sich im Vergleich zu <code>abfrage-tutorial-03.xql</code> geändert?</li>
</ol>
<p>Wenn Sie den Code mit eXide ausführen, sollte sich im Ergebnis nichts sichtbares geändert haben. Sie können jedoch URL-Parameter angeben, um Daten zu filtern.</p>
<h2 id="page_URL-Parameter">URL-Parameter</h2>
<p>Überfliegen Sie kurz die <a href="https://correspsearch.net/quotesalute//index.xql?id=doc&amp;l=de" class="Link--external">Dokumentation von quoteSalute</a>.</p>
<h3 id="page_Einzelner-Filter-Briefe-von-Frauen">Einzelner Filter - Briefe von Frauen</h3>
<p>Sie können über die Browser-URL Parameter (nutzerspezifizierte Werte) an das quoteSalute-Back-End übergeben.</p>
<p>Das grundlegende Prinzip ist folgendermaßen: <code>[URL]?parameter=wert</code>. Mit dem <code>?</code> wird angezeigt, dass Parameter übergeben werden sollen.</p>
<ol>
<li>Öffnen Sie folgende URL in einem neuen Browser-Tab: <a href="http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql" class="Link--external">http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql</a>
</li>
<li>Sie sollten eine Grußformel als JSON erhalten.</li>
<li>Erweitern Sie die URL mit <code>?sender=s-f</code>. (<code>s</code> für &quot;sender&quot; und <code>f</code> für &quot;female&quot;)</li>
<li>Ihre URL sollte jetzt <a href="http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f" class="Link--external">http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f</a> lauten.</li>
<li>Im <code>title</code>-Feld sollten Sie nachvollziehen können, dass nur noch Grußformeln von Briefen angezeigt werden, deren Verfasser Frauen waren.</li>
<li>Laden Sie den Tab mit <code>F5</code> neu, um sich eine andere zufällige Grußformel anzeigen zu lassen.</li>
</ol>
<h3 id="page_Mehrere-Filter-Briefe-von-Frauen-an-Frauen-oder-neutral">Mehrere Filter - Briefe von Frauen an Frauen (oder neutral)</h3>
<p>Sie können auch mehrere Parameter über die Browser-URL übergeben.</p>
<p>Das grundlegende Prinzip ist folgendermaßen <code>[URL]?parameter1=wert1&amp;parameter2=wert2</code>. Mit dem <code>&amp;</code> werden Parameterpaare getrennt.</p>
<ol>
<li>Öffnen Sie folgende URL in einem neuen Browser-Tab: <a href="http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f" class="Link--external">http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f</a>
</li>
<li>Sie sollten eine Grußformel als JSON erhalten.</li>
<li>Erweitern Sie die URL mit <code>&amp;receiver=r-fXr-n</code>.</li>
<li>Ihre URL sollte jetzt <a href="http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f&amp;receiver=r-fXr-n" class="Link--external">http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f&amp;receiver=r-fXr-n</a>
</li>
<li>Anhand der Daten sollten Sie nachvollziehen können, dass nur noch Grußformeln von Briefen angezeigt werden, deren Verfasser Frauen waren und deren Empfänger entweder auch Frauen waren bzw. so formuliert sind, dass sich das Geschlecht des Empfängers nicht bestimmen lässt.</li>
<li>Laden Sie den Tab mit <code>F5</code> neu, um sich eine andere zufällige Grußformel anzeigen zu lassen.</li>
</ol>
<h2 id="page_Erlaeuterungen">Erläuterungen</h2>
<p>Z. 12-15: Wir teilen der eXist-db mit, dass die Werte von URL-Parametern in Variablen gespeichert werden sollen, falls diese vorkommen. Zum Beispiel wird in <code>$sender</code> der Wert <code>s-f</code> gespeichert, wenn die Anfrage von der URL <code>http://localhost:8080/exist/apps/quotesalute/abfrage-tutorial-04.xql?sender=s-f</code> kommt.</p>
<p>Folgende URL-Parameter werden akzeptiert:</p>
<ul>
<li>
<code>type</code> - Höflichkeitsstufe</li>
<li>
<code>sender</code> - Geschlecht der absendenden Person</li>
<li>
<code>receiver</code> - Geschlecht der empfangenden Person</li>
<li>
<code>language</code> - Sprache, in welcher die Grußformel verfasst wurde</li>
</ul>
<pre><code class="language-xquery">declare variable $type := request:get-parameter('type', ());
declare variable $sender := request:get-parameter('sender', ());
declare variable $receiver := request:get-parameter('receiver', ());
declare variable $language := request:get-parameter('language', ());
</code></pre>
<p>Z. 39-76: Hier werden die URL-Parameterwerte für eine Datenbankabfrage aufbereitet, sodass der quoteSalute-Korpus entsprechend gefiltert werden kann.</p>
<p>In dem Code-Schnipsel werden nur <code>type</code>, <code>sender</code> und <code>receiver</code> aufbereitet. Der <code>langauge</code>-Filter ist die <a href="Challenge_2_-_Ein_neuer_Filter.html">nächste Challenge</a>.</p>
<p>In Code-Blöcken zu <code>$type-contains</code>, <code>$sender-contains</code> und <code>$receiver-contains</code> werden Mehrfachnennungen der URL-Parameter aufbereitet. Z.B. wird aus dem URL-Parameter <code>?receiver=r-fXr-n</code> die XQuery-Schnipsel <code>contains(.//@ana, &quot;#r-f&quot;)</code> und <code>contains(.//@ana, &quot;#r-n&quot;)</code>.</p>
<p>In den Code-Blöcken zu <code>$filter-type</code>, <code>$filter-sender</code> und <code>$filter-receiver</code> werden diese XQuery-Schnipsel dann zu einer Filter-Datenbankanfrage zusammengefügt. Z.B. entsteht dann folgender Wertschnipsel: <code>contains(.//@ana, &quot;#r-f&quot;) or contains(.//@ana, &quot;#r-n&quot;)</code>. Also liefere nur Grußformeln zurück, welche im <code>@ana</code>-Attribut die Werte <code>#r-f</code> oder <code>#r-n</code> enthalten.</p>
<pre><code class="language-xquery">(: START - Höflichkeitsfilter vorbereiten :)
let $type-contains :=
    for $item in tokenize($type, 'X')
        let $contain := concat(&quot;#&quot;, $item)
        return concat('contains(.//@ana, &quot;', $contain, '&quot;)')

let $filter-type :=
     if (count($type) &gt;= 1) then
        let $containQuery := string-join($type-contains, ' or ')
        return concat('[', $containQuery, ']')
     else ()
(: ENDE - Höflichkeitsfilter vorbereiten :)

(: START - Absenderfilter vorbereiten :)
let $sender-contains :=
    for $item in tokenize($sender, 'X')
        let $contain := concat(&quot;#&quot;, $item)
        return concat('contains(.//@ana, &quot;', $contain, '&quot;)')

let $filter-sender :=
     if (count($sender) &gt;= 1) then
        let $containQuery := string-join($sender-contains, ' or ')
        return concat('[', $containQuery, ']')
     else ()
(: ENDE - Absenderfilder vorbereiten :)

(: START - Empfängerfilter vorbereiten :)
let $receiver-contains :=
    for $item in tokenize($receiver, 'X')
        let $contain := concat(&quot;#&quot;, $item)
        return concat('contains(.//@ana, &quot;', $contain, '&quot;)')

let $filter-receiver :=
     if (count($receiver) &gt;= 1) then
        let $containQuery := string-join($receiver-contains, ' or ')
        return concat('[', $containQuery, ']')
     else () 
(: ENDE - Empfängerfilter vorberiten :)
</code></pre>
<p>Z. 78: Bereite eine Abfrage (engl. query) vor, indem die bisher bekannte Anfrage <code>collection($data)//tei:cit</code> mit den Filtern erweitert wird. Die <code>||</code>-Zeichen bedeuten, dass die Werte der dahinterliegenden Variablen und Ausdrücke an die Abfrage rangefügt werden sollen.</p>
<pre><code class="language-xquery">let $query := ('collection($data)//tei:cit'||$filter-type||$filter-sender||$filter-receiver)
</code></pre>
<p>Z. 79: Nun holen wir eine Kollektion an Grußformeln, auf die die Filter passen.</p>
<pre><code class="language-xquery">let $greetings := util:eval($query)
</code></pre>
<p>Der Rest der Datei ist wie bisher und folgt derselben Logik.</p>
<h2 id="page_Code">Code</h2>
<pre><code class="language-xquery">xquery version &quot;3.0&quot;;

(: Deklaration von Namensräumen. Wichtig für die Arbeit mit TEI-XML-Daten :)
declare namespace tei=&quot;http://www.tei-c.org/ns/1.0&quot;;
declare namespace output=&quot;http://www.w3.org/2010/xslt-xquery-serialization&quot;;

(: Serialisierung nach JSON als Ergebnisziel angeben :)
declare option exist:serialize &quot;media-type=application/json&quot;;

(: Request-Parameter entgegenennehmen. Wenn von einer Webseite eine Anfrage kommt,
 : können nutzerdefinierte Angaben mit überreicht werden. :)
declare variable $type := request:get-parameter('type', ());
declare variable $sender := request:get-parameter('sender', ());
declare variable $receiver := request:get-parameter('receiver', ());
declare variable $language := request:get-parameter('language', ());

(: Helferfunktion um Datenstrukturen zu bereinigen :)
declare function local:clean-up($nodes as node()*) as xs:string* {
    for $node in $nodes
    return
        typeswitch($node)
            case element(tei:lb)|element(tei:abbr)|element(tei:reg)|element(tei:note)
                return
                ()
            case element()
                return
                local:clean-up($node/node())
            case text()
                return
                $node
            default
                return
                local:clean-up($node/node())
    };

(: Variable zum Speichern des Daten-Verzeichnispfads :)
let $data := &quot;/db/apps/quotesalute/data&quot;

(: START - Höflichkeitsfilter vorbereiten :)
let $type-contains :=
    for $item in tokenize($type, 'X')
        let $contain := concat(&quot;#&quot;, $item)
        return concat('contains(.//@ana, &quot;', $contain, '&quot;)')

let $filter-type :=
     if (count($type) &gt;= 1) then
        let $containQuery := string-join($type-contains, ' or ')
        return concat('[', $containQuery, ']')
     else () 
(: ENDE - Höflichkeitsfilter vorbereiten :)

(: START - Absenderfilter vorbereiten :)
let $sender-contains :=
    for $item in tokenize($sender, 'X')
        let $contain := concat(&quot;#&quot;, $item)
        return concat('contains(.//@ana, &quot;', $contain, '&quot;)')

let $filter-sender :=
     if (count($sender) &gt;= 1) then
        let $containQuery := string-join($sender-contains, ' or ')
        return concat('[', $containQuery, ']')
     else ()
(: ENDE - Absenderfilder vorbereiten :)

(: START - Empfängerfilter vorbereiten :)
let $receiver-contains :=
    for $item in tokenize($receiver, 'X')
        let $contain := concat(&quot;#&quot;, $item)
        return concat('contains(.//@ana, &quot;', $contain, '&quot;)')

let $filter-receiver :=
     if (count($receiver) &gt;= 1) then
        let $containQuery := string-join($receiver-contains, ' or ')
        return concat('[', $containQuery, ']')
     else ()
(: ENDE - Empfängerfilter vorberiten :)

let $query := ('collection($data)//tei:cit'||$filter-type||$filter-sender||$filter-receiver)
let $greetings := util:eval($query)

(: Wähle eine zufällige Position aus der Ergebnisliste :)
let $random := util:random(count($greetings))

(: Stelle sicher, dass auch wirklich nur ein Ergebnis ausgewählt wurde :)
let $cleanRandom :=
    if ($random &gt;= 1)
    then $random
    else 1

(: Hole die Grußformel an der Stelle :)
let $randomcit := $greetings[position()=$cleanRandom]

(: Erstelle Variablen für die Inhalte und Metdaten zu einer Grußformel :)
let $quote := element quote { normalize-space(string-join(local:clean-up($randomcit/tei:quote))) }
let $edition := element edition { normalize-space($randomcit//tei:title[@type='edition']) }
let $title := element title { normalize-space($randomcit//tei:title[@type='letter']) }
let $language := element language { normalize-space($randomcit//tei:quote/@xml:lang) }
let $url := element url { $randomcit//tei:bibl/tei:ref/@target/data(.) }
let $licence := element licence { $randomcit//tei:licence/@target/data(.) }

let $preparedGreeting := element cit {$quote,$edition,$title,$url,$language,$licence}

(: Bestimmte wie die JSON-Serializierung aussehen soll :)
let $jsonSerializationParams :=
&lt;output:serialization-parameters
        xmlns:output=&quot;http://www.w3.org/2010/xslt-xquery-serialization&quot;&gt;
    &lt;output:method value=&quot;json&quot;/&gt;
    &lt;output:media-type value=&quot;application/json&quot;/&gt;
   &lt;output:json-ignore-whitespace-text-nodes value=&quot;yes&quot;/&gt;
&lt;/output:serialization-parameters&gt;

(: Serialisiere das zufällige XML-cit-Element nach JSON :)
return
serialize($preparedGreeting, $jsonSerializationParams)
</code></pre>
    </div>

        <nav>
        <ul class="Pager">
            <li class=Pager--prev><a href="../XML_zu_JSON_in_eXist-db/XML_zu_JSON.html">Zurück</a></li>            <li class=Pager--next><a href="../XML_zu_JSON_in_eXist-db/Challenge_2_-_Ein_neuer_Filter.html">Weiter</a></li>        </ul>
    </nav>
    </article>

            </div>
        </div>
    </div>
</div>

    
    <!-- JS -->
    <script src="../themes/daux/js/jquery-1.11.3.min.js"></script><script src="../themes/daux/js/highlight.pack.js"></script><script src="../themes/daux/js/daux.js"></script>
            <script>
            
            window.searchLanguage = "";
            window.searchTranslation = {"Search_one_result":"1 Ergebnis","Search_results":"!count Ergebnisse","Search_no_results":"Nichts gefunden","Search_common_words_ignored":"Allgemeine W\u00f6rter werden weitgehend ignoriert","Search_too_short":"Suche zu kurz","Search_one_character_or_more":"Sollte ein Zeichen oder mehr sein","Search_should_be_x_or_more":"Sollte !min Zeichen oder mehr sein","Link_previous":"Zur\u00fcck","Link_next":"Weiter"};
        </script>

        <!-- Tipue Search -->
        <script type="text/javascript" src="../tipuesearch/tipuesearch.js"></script>

        <script>
            window.onunload = function(){}; // force $(document).ready to be called on back/forward navigation in firefox
            $(function() {
                tipuesearch({
                    'base_url': '../'
                });
            });
        </script>
    
</body>
</html>
